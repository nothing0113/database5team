# app/init_db.py
import uuid
from datetime import datetime, timedelta
import random
from app.database import SessionLocal, engine
from app import models
from sqlalchemy.exc import IntegrityError

# 1. í…Œì´ë¸” ìƒì„±
models.Base.metadata.create_all(bind=engine)
print("ğŸ—‘ï¸ ê¸°ì¡´ ë°ì´í„°ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ê³  ì´ˆê¸°í™”í•©ë‹ˆë‹¤...")
models.Base.metadata.drop_all(bind=engine)   # <--- 1. ê¸°ì¡´ í…Œì´ë¸” ì‚­ì œ (ì´ˆê¸°í™”)
models.Base.metadata.create_all(bind=engine) # <--- 2. í…Œì´ë¸” ìƒˆë¡œ ìƒì„±

# ==========================================
# [ë°ì´í„°ì…‹] ê½ƒ ë°ì´í„° ë¦¬ìŠ¤íŠ¸ (ì•½ 60~70ê°œ)
# ==========================================
def get_flower_dataset():
    flowers = []
    
    # 1. ì¥ë¯¸ë¥˜
    colors = [("Red", "ì—´ì •ì ì¸ ì‚¬ë‘"), ("White", "ìˆœìˆ˜, ì¡´ê²½"), ("Pink", "í–‰ë³µí•œ ì‚¬ë‘, ë§¹ì„¸"), 
              ("Yellow", "ìš°ì •, ì™„ë²½í•œ ì„±ì·¨"), ("Orange", "ì²«ì‚¬ë‘ì˜ ê³ ë°±"), ("Purple", "ì˜ì›í•œ ì‚¬ë‘"), 
              ("Blue", "ê¸°ì , ì´ë¤„ë‚¼ ìˆ˜ ìˆëŠ” ê¿ˆ"), ("Black", "ë‹¹ì‹ ì€ ë‚˜ì˜ ê²ƒ")]
    for color_en, meaning in colors:
        color_kr = {"Red": "ë¹¨ê°„", "White": "í•˜ì–€", "Pink": "ë¶„í™", "Yellow": "ë…¸ë€", 
                    "Orange": "ì£¼í™©", "Purple": "ë³´ë¼", "Blue": "íŒŒë€", "Black": "ê²€ì€"}.get(color_en)
        flowers.append({
            "name": f"{color_kr} ì¥ë¯¸",
            "meaning": meaning,
            "color": color_en,
            "care_guide": "ì¤„ê¸° ëì„ ì‚¬ì„ ìœ¼ë¡œ ìë¥´ê³  ë§¤ì¼ ë¬¼ì„ ê°ˆì•„ì£¼ì„¸ìš”. ì˜¨ë„ ë³€í™”ì— ë¯¼ê°í•©ë‹ˆë‹¤."
        })

    # 2. íŠ¤ë¦½ë¥˜
    tulips = [("Red", "ì‚¬ë‘ì˜ ê³ ë°±"), ("Purple", "ì˜ì›í•œ ì‚¬ë‘"), ("Yellow", "í—›ëœ ì‚¬ë‘, í¬ë§"), ("White", "ì‹¤ì—°, ìš©ì„œ")]
    for color_en, meaning in tulips:
        color_kr = {"Red": "ë¹¨ê°„", "Purple": "ë³´ë¼", "Yellow": "ë…¸ë€", "White": "í•˜ì–€"}.get(color_en)
        flowers.append({
            "name": f"{color_kr} íŠ¤ë¦½",
            "meaning": meaning,
            "color": color_en,
            "care_guide": "ì„œëŠ˜í•œ ê³³ì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì¤„ê¸°ê°€ íœ˜ì–´ì§€ê¸° ì‰¬ìš°ë‹ˆ ê¹Šì€ í™”ë³‘ì„ ì‚¬ìš©í•˜ì„¸ìš”."
        })

    # 3. ê¸°íƒ€ ì¸ê¸° ê½ƒ
    others = [
        ("ì•ˆê°œê½ƒ", "ë§‘ì€ ë§ˆìŒ, ì‚¬ë‘ì˜ ì„±ê³µ", "White", "ë“œë¼ì´í”Œë¼ì›Œë¡œ ë§Œë“¤ê¸° ì¢‹ìŠµë‹ˆë‹¤. ìŠµê¸°ë¥¼ í”¼í•´ì£¼ì„¸ìš”."),
        ("í”„ë¦¬ì§€ì•„", "ì²œì§„ë‚œë§Œ, ë‹¹ì‹ ì˜ ì‹œì‘ì„ ì‘ì›í•´", "Yellow", "ì—í‹¸ë Œ ê°€ìŠ¤ì— ë¯¼ê°í•©ë‹ˆë‹¤. ì‹œë“  ê½ƒì€ ë°”ë¡œ ì œê±°í•˜ì„¸ìš”."),
        ("ë¦¬ì‹œì•ˆì…”ìŠ¤", "ë³€ì¹˜ ì•ŠëŠ” ì‚¬ë‘", "Purple", "ì¤„ê¸°ê°€ ê°€ëŠ˜ì–´ êº¾ì´ê¸° ì‰¬ìš°ë‹ˆ ì¡°ì‹¬íˆ ë‹¤ë¤„ì£¼ì„¸ìš”."),
        ("ì‘ì•½", "ìˆ˜ì¤ìŒ, ë¶€ê·€", "Pink", "ë´‰ì˜¤ë¦¬ê°€ ëˆì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¼ì„ ìì£¼ ê°ˆì•„ì£¼ì„¸ìš”."),
        ("ìˆ˜êµ­", "ì§„ì‹¬, ë³€ë•", "Blue", "ë¬¼ì„ ë§¤ìš° ì¢‹ì•„í•©ë‹ˆë‹¤. ê½ƒìì— ë¬¼ì„ ë¶„ë¬´í•´ì£¼ëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤."),
        ("í•´ë°”ë¼ê¸°", "ë‹¹ì‹ ë§Œì„ ë°”ë¼ë´…ë‹ˆë‹¤, ìˆ­ë°°", "Yellow", "ì¤„ê¸°ê°€ êµµì–´ ë¬¼ì´ ì‰½ê²Œ íƒí•´ì§€ë‹ˆ ìì£¼ ê°ˆì•„ì£¼ì„¸ìš”."),
        ("ë¼ë²¤ë”", "ì¹¨ë¬µ, ë‚˜ì—ê²Œ ëŒ€ë‹µí•˜ì„¸ìš”", "Purple", "í†µí’ì´ ì˜ ë˜ëŠ” ê³³ì— ë‘ì„¸ìš”. í–¥ê¸°ê°€ ì§„í•©ë‹ˆë‹¤."),
        ("ì¹´ë„¤ì´ì…˜", "ëª¨ì •, ì‚¬ë‘", "Red", "ì—í‹¸ë Œì— ë¯¼ê°í•©ë‹ˆë‹¤. ì„œëŠ˜í•œ ê³³ì— ë³´ê´€í•˜ì„¸ìš”."),
        ("ë°±í•©", "ìˆœê²°, ë³€í•¨ì—†ëŠ” ì‚¬ë‘", "White", "ê½ƒê°€ë£¨ê°€ ì˜·ì— ë¬»ìœ¼ë©´ ì§€ì›Œì§€ì§€ ì•Šìœ¼ë‹ˆ ìˆ˜ìˆ ì„ ë¯¸ë¦¬ ì œê±°í•˜ì„¸ìš”."),
        ("êµ­í™”", "ê³ ê²°, í‰í™”", "White", "ìì´ ë¬¼ì— ì ê¸°ì§€ ì•Šê²Œ ì •ë¦¬í•´ì£¼ì„¸ìš”."),
        ("ë¸í”¼ëŠ„", "ë‹¹ì‹ ì„ í–‰ë³µí•˜ê²Œ í•´ì¤„ê²Œìš”", "Blue", "ì¤„ê¸°ê°€ ì•½í•´ ì§€ì§€ëŒ€ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."),
        ("ë¼ë„Œí˜ëŸ¬ìŠ¤", "ë§¤ë ¥, ë§¤í˜¹", "Pink", "ì¤„ê¸°ê°€ ì†ì´ ë¹„ì–´ ìˆì–´ ì•½í•©ë‹ˆë‹¤. ë¬¼ì„ ì–•ê²Œ ë‹´ì•„ì£¼ì„¸ìš”."),
        ("ë©”ë¦¬ê³¨ë“œ", "ë°˜ë“œì‹œ ì˜¤ê³ ì•¼ ë§ í–‰ë³µ", "Orange", "íŠ¹ìœ ì˜ í–¥ì´ ë²Œë ˆë¥¼ ì«“ì•„ì¤ë‹ˆë‹¤."),
        ("ìŠ¤í† í¬", "ì˜ì›í•œ ì•„ë¦„ë‹¤ì›€", "Purple", "í–¥ê¸°ê°€ ë§¤ìš° ì§„í•˜ê³  ì˜¤ë˜ê°‘ë‹ˆë‹¤."),
        ("ìœ ì¹¼ë¦½íˆ¬ìŠ¤", "ì¶”ì–µ", "Green", "ë¬¼ì˜¬ë¦¼ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë“œë¼ì´ ì†Œì¬ë¡œë„ í›Œë¥­í•©ë‹ˆë‹¤."),
        ("íˆì•„ì‹ ìŠ¤", "ìœ í¬, ê²¸ì†í•œ ì‚¬ë‘", "Purple", "ë¿Œë¦¬ êµ¬ê·¼ ì‹ë¬¼ì…ë‹ˆë‹¤. í–¥ì´ ë§¤ìš° ê°•í•©ë‹ˆë‹¤."),
        ("ì œë¼ëŠ„", "ê²°ì‹¬, ê·¸ëŒ€ê°€ ìˆì–´ í–‰ë³µí•©ë‹ˆë‹¤", "Red", "í–‡ë¹›ì„ ì¢‹ì•„í•˜ì§€ë§Œ ì§ì‚¬ê´‘ì„ ì€ í”¼í•˜ì„¸ìš”."),
        ("ì¹´ë¼", "ìˆœìˆ˜, ì²œë…„ì˜ ì‚¬ë‘", "White", "ì¤„ê¸°ê°€ ë¬´ë¥´ê¸° ì‰¬ìš°ë‹ˆ ë¬¼ì„ ìì£¼ ê°ˆì•„ì£¼ì„¸ìš”."),
        ("íŒ¬ì§€", "ë‚˜ë¥¼ ìƒê°í•´ì£¼ì„¸ìš”", "Yellow", "ì‹ìš© ê½ƒìœ¼ë¡œë„ ì“°ì…ë‹ˆë‹¤."),
        ("ì½”ìŠ¤ëª¨ìŠ¤", "ìˆœì •", "Pink", "ê°€ì„ì„ ëŒ€í‘œí•˜ëŠ” ê½ƒì…ë‹ˆë‹¤."),
        ("ëª©í™”", "ì–´ë¨¸ë‹ˆì˜ ì‚¬ë‘", "White", "ë¬¼ì„ ì¤„ í•„ìš”ê°€ ì—†ëŠ” ë“œë¼ì´ í”Œë¼ì›Œì…ë‹ˆë‹¤."),
        ("ì•„ì´ë¦¬ìŠ¤", "ì¢‹ì€ ì†Œì‹", "Purple", "ì§ì‚¬ê´‘ì„ ì„ í”¼í•˜ê³  ì„œëŠ˜í•œ ê³³ì— ë‘ì„¸ìš”."),
        ("ë¬¼ë§ì´ˆ", "ë‚˜ë¥¼ ìŠì§€ ë§ˆì„¸ìš”", "Blue", "ì‘ê³  ê·€ì—¬ìš´ ê½ƒì…ë‹ˆë‹¤."),
        ("ë‹¤ì•Œë¦¬ì•„", "í™”ë ¤, ê°ì‚¬", "Red", "ê½ƒìì´ ë–¨ì–´ì§€ê¸° ì‰¬ìš°ë‹ˆ ì¡°ì‹¬í•˜ì„¸ìš”."),
        ("ì€ë°©ìš¸ê½ƒ", "í‹€ë¦¼ì—†ì´ í–‰ë³µí•´ì§‘ë‹ˆë‹¤", "White", "ê²°í˜¼ì‹ ë¶€ì¼€ë¡œ ì¸ê¸°ê°€ ë§ìŠµë‹ˆë‹¤."),
        ("ë™ë°±", "ê·¸ ëˆ„êµ¬ë³´ë‹¤ ë‹¹ì‹ ì„ ì‚¬ë‘í•©ë‹ˆë‹¤", "Red", "ê²¨ìš¸ì— í”¼ëŠ” ê½ƒì…ë‹ˆë‹¤."),
        ("ë¬´ê¶í™”", "ì¼í¸ë‹¨ì‹¬", "Pink", "ëŒ€í•œë¯¼êµ­ì˜ êµ­í™”ì…ë‹ˆë‹¤."),
        ("ê°œë‚˜ë¦¬", "í¬ë§", "Yellow", "ë´„ì˜ ì „ë ¹ì‚¬ì…ë‹ˆë‹¤."),
        ("ì§„ë‹¬ë˜", "ì‚¬ë‘ì˜ ê¸°ì¨", "Pink", "ì‹ìš© ê°€ëŠ¥í•œ ì¢…ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤."),
        ("ì² ì­‰", "ì‚¬ë‘ì˜ ì¦ê±°ì›€", "Red", "ë…ì„±ì´ ìˆìœ¼ë‹ˆ ì ˆëŒ€ ë¨¹ìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤."),
        ("ë§¤í™”", "ê³ ê²°í•œ ë§ˆìŒ", "White", "ì¶”ìœ„ë¥¼ ì´ê¸°ê³  ê½ƒì„ í”¼ì›ë‹ˆë‹¤."),
        ("ë²šê½ƒ", "ìˆœê²°, ì ˆì„¸ë¯¸ì¸", "Pink", "ê°œí™” ì‹œê¸°ê°€ ì§§ìŠµë‹ˆë‹¤."),
        ("ì•„ë„¤ëª¨ë„¤", "ë°°ì‹ , ì†ì ˆì—†ëŠ” ì‚¬ë‘", "Red", "ë‚®ì—ëŠ” í”¼ê³  ë°¤ì—ëŠ” ì˜¤ë¯€ë¼ë“­ë‹ˆë‹¤."),
        ("ê±°ë² ë¼", "ì‹ ë¹„, ìˆ˜ìˆ˜ê»˜ë¼", "Orange", "ì¤„ê¸°ì— ì†œí„¸ì´ ë§ì•„ ë¬¼ì´ ì‰½ê²Œ ë¶€íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."),
        ("ê¸€ë¼ë””ì˜¬ëŸ¬ìŠ¤", "ë°€íšŒ, ì¡°ì‹¬", "Red", "ê½ƒì´ ì•„ë˜ì—ì„œ ìœ„ë¡œ í”¼ì–´ì˜¬ë¼ê°‘ë‹ˆë‹¤."),
        ("ê¸ˆì”í™”", "ì´ë³„ì˜ ìŠ¬í””", "Yellow", "í”¼ë¶€ ì§„ì • íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤."),
        ("ë„ë¼ì§€ê½ƒ", "ì˜ì›í•œ ì‚¬ë‘", "Purple", "ë¿Œë¦¬ëŠ” ì‹ìš©ì´ë‚˜ ì•½ìš©ìœ¼ë¡œ ì“°ì…ë‹ˆë‹¤."),
        ("ë§¨ë“œë¼ë¯¸", "ì‹œë“¤ì§€ ì•ŠëŠ” ì‚¬ë‘", "Red", "ê½ƒ ëª¨ì–‘ì´ ë‹­ì˜ ë²¼ìŠ¬ì„ ë‹®ì•˜ìŠµë‹ˆë‹¤."),
        ("ë´‰ì„ í™”", "ë‚˜ë¥¼ ê±´ë“œë¦¬ì§€ ë§ˆì„¸ìš”", "Red", "ì†í†±ì— ë¬¼ì„ ë“¤ì¼ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤."),
        ("ìˆ˜ì„ í™”", "ìê¸°ì• , ìì¡´ì‹¬", "Yellow", "êµ¬ê·¼ ì‹ë¬¼ë¡œ ë´„ì— í•ë‹ˆë‹¤."),
        ("ì–‘ê·€ë¹„", "ìœ„ë¡œ", "Red", "ê´€ìƒìš© ì–‘ê·€ë¹„ì…ë‹ˆë‹¤."),
        ("ì—‰ê²…í€´", "ë…ë¦½", "Purple", "ê°€ì‹œê°€ ë§ìŠµë‹ˆë‹¤."),
        ("ì±„ì†¡í™”", "ê°€ë ¨, ìˆœì§„", "Pink", "í–‡ë¹›ì´ ìˆì–´ì•¼ ê½ƒì´ í•ë‹ˆë‹¤."),
        ("í´ë¡œë²„", "í–‰ìš´(ë„¤ì), í–‰ë³µ(ì„¸ì)", "White", "í† ë¼í’€ì´ë¼ê³ ë„ ë¶ˆë¦½ë‹ˆë‹¤."),
        ("íˆ¬êµ¬ê½ƒ", "ë°¤ì˜ ì—´ë¦¼", "Purple", "ë…ì„±ì´ ê°•í•˜ë‹ˆ ì£¼ì˜í•˜ì„¸ìš”."),
        ("íŒ¨ë­ì´ê½ƒ", "ìˆœê²°í•œ ì‚¬ë‘", "Pink", "ë°”ìœ„ í‹ˆì—ì„œë„ ì˜ ìëë‹ˆë‹¤."),
        ("í• ë¯¸ê½ƒ", "ìŠ¬í”ˆ ì¶”ì–µ", "Red", "í° í„¸ì´ í• ë¨¸ë‹ˆ ë¨¸ë¦¬ì¹´ë½ ê°™ìŠµë‹ˆë‹¤."),
        ("í˜¸ì ‘ë€", "í–‰ë³µì´ ë‚ ì•„ì˜´", "White", "ì‹¤ë‚´ ê³µê¸° ì •í™”ì— ì¢‹ìŠµë‹ˆë‹¤."),
        ("í™í™”", "ë¶ˆë³€", "Red", "ì²œì—° ì—¼ë£Œë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤."),
        ("ì—°ê½ƒ", "ìˆœê²°, ì²­ì •", "Pink", "ì§„í™ ì†ì—ì„œ ê¹¨ë—í•œ ê½ƒì„ í”¼ì›ë‹ˆë‹¤.")
    ]
    
    for name, meaning, color, guide in others:
        flowers.append({
            "name": name,
            "meaning": meaning,
            "color": color,
            "care_guide": guide
        })
        
    return flowers

# ==========================================
# [ë°ì´í„°ì…‹] ê°€ë§¹ì  ë¦¬ìŠ¤íŠ¸ (10ê°œ)
# ==========================================
def get_store_dataset():
    stores = [
        ("ê°•ë‚¨ í”Œë¡œì¸", "ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123", "owner1"),
        ("í™ëŒ€ ê½ƒê¸¸ë§Œê±·ì", "ì„œìš¸ ë§ˆí¬êµ¬ ì™€ìš°ì‚°ë¡œ 45", "owner2"),
        ("ì„œì´ˆ ì–´ë°˜í”Œë¼ì›Œ", "ì„œìš¸ ì„œì´ˆêµ¬ ì„œì´ˆëŒ€ë¡œ 77", "owner3"),
        ("ì†¡íŒŒ ë°ì¼ë¦¬ê·¸ë¦°", "ì„œìš¸ ì†¡íŒŒêµ¬ ì˜¬ë¦¼í”½ë¡œ 300", "owner4"),
        ("ì„±ìˆ˜ ë¡œì¦ˆë§ˆë¦¬", "ì„œìš¸ ì„±ë™êµ¬ ì•„ì°¨ì‚°ë¡œ 99", "owner5"),
        ("ì´íƒœì› ë³´íƒ€ë‹‰ê°€ë“ ", "ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ 200", "owner6"),
        ("ì¢…ë¡œ ê½ƒì´ì•¼ê¸°", "ì„œìš¸ ì¢…ë¡œêµ¬ ì¢…ë¡œ 55", "owner7"),
        ("ì—¬ì˜ë„ ë¸”ë£¸", "ì„œìš¸ ì˜ë“±í¬êµ¬ ì—¬ì˜ëŒ€ë¡œ 60", "owner8"),
        ("íŒêµ ê·¸ë¦°ì•„í‹€ë¦¬ì—", "ê²½ê¸° ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ íŒêµì—­ë¡œ 10", "owner9"),
        ("ë¶„ë‹¹ íë§í”Œë¼ì›Œ", "ê²½ê¸° ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ ì •ìì¼ë¡œ 25", "owner10")
    ]
    return stores

def init_data():
    db = SessionLocal()
    try:
        print("ğŸ”„ FloMe ë°ì´í„° ì¬êµ¬ì¶• (ê°€ê²Œë³„ ì¬ê³  ì°¨ë³„í™”) ì‹œì‘...")

        # 1. ê½ƒ ë“±ë¡
        flower_list = get_flower_dataset()
        for d in flower_list:
            db.add(models.Flower(name=d['name'], meaning=d['meaning'], color=d['color'], care_guide=d['care_guide']))
        db.commit()
        flower_objs = db.query(models.Flower).all()

        # 2. ìœ ì € ë“±ë¡
        db.add(models.Member(member_id="user@flome.com", password="pw", name="ì´ì†ë‹˜", contact="010-0000-0000", type=models.MemberType.USER, location_agree=True, money=200000))

        # 3. ë§¤ì¥ ë° ì¬ê³  ë“±ë¡
        store_list = get_store_dataset()
        for idx, (s_name, addr, o_id) in enumerate(store_list):
            # ì‚¬ì¥ë‹˜
            owner = models.Member(member_id=f"{o_id}@flome.com", password="pw", name=f"ì‚¬ì¥ë‹˜{idx+1}", contact="010-1111-1111", type=models.MemberType.OWNER, location_agree=True)
            db.add(owner)
            db.commit()
            
            # ë§¤ì¥
            store = models.Store(owner_id=owner.member_id, name=s_name, address=addr, business_hours="09:00-20:00", has_pickup_box=True)
            db.add(store)
            db.commit()
            db.refresh(store)

            # [í•µì‹¬ ìˆ˜ì • ë¶€ë¶„] ì¬ê³  ëœë¤ ë“±ë¡ (ë³´ìœ  ì¢…ë¥˜ë¥¼ ì¤„ì„)
            # ì „ì²´ ê½ƒì˜ 20% ~ 30% ì •ë„ë§Œ ë³´ìœ í•˜ë„ë¡ ì„¤ì • (ì•½ 15~20ì¢…)
            total_count = len(flower_objs)
            min_variety = int(total_count * 0.2) 
            max_variety = int(total_count * 0.3)
            
            # ë§¤ì¥ë§ˆë‹¤ ë³´ìœ í•œ ê½ƒ ì¢…ë¥˜ë¥¼ ë‹¤ë¥´ê²Œ ë½‘ìŒ
            my_flowers = random.sample(flower_objs, k=random.randint(min_variety, max_variety))
            
            print(f"   -> [{store.name}] ë³´ìœ  ê½ƒ ì¢…ë¥˜: {len(my_flowers)}ê°œ")

            for fl in my_flowers:
                # ìˆ˜ëŸ‰ì€ 18~22ê°œë¡œ ë„‰ë„‰í•˜ê²Œ
                db.add(models.Stock(
                    store_id=store.store_id,
                    flower_id=fl.flower_id,
                    quantity=random.randint(18, 22), 
                    stocking_date=datetime.now(),
                    status=models.StockStatus.AVAILABLE
                ))
            
            # ì™„ì œí’ˆ 1ê°œ ë“±ë¡
            prod = models.Product(store_id=store.store_id, name=f"{store.name} ëœë¤ë°•ìŠ¤", price=30000, type=models.ProductType.READY_MADE)
            db.add(prod)
            db.commit()
            db.refresh(prod)
            db.add(models.Stock(store_id=store.store_id, product_id=prod.product_id, quantity=10, stocking_date=datetime.now(), status=models.StockStatus.AVAILABLE))
            
        db.commit()
        print("ğŸ‰ ì´ˆê¸°í™” ì™„ë£Œ! ì´ì œ ê²€ìƒ‰í•˜ë©´ ì¼ë¶€ ë§¤ì¥ë§Œ ë‚˜ì˜µë‹ˆë‹¤.")

    except Exception as e:
        print(f"Error: {e}")
        db.rollback()
    finally:
        db.close()

if __name__ == "__main__":
    init_data()